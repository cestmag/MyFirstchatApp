<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="">
 
  <link rel="stylesheet" href="/style3.css"> <!-- /public/style ã ã¨ã ã‚-->
  
  <title></title> 
  
  
<script defer src="http://localhost:5000/socket.io/socket.io.js">// user.jsã®ioã®ã‚ã‚‹å ´æ‰€</script>

<script defer src="users.js"></script>


</head>   
<body>
  <header>
      <p id="usernamepunk">æœªãƒ­ã‚°ã‚¤ãƒ³ã ã«ã‚‡</p>
      <div class="chris">
      <h2>ChatApp</h2>
    <nav>
      <ul class="main-nav">
        <li><a href="/">Login</a></li>
        <li><a href="/index">Register</a></li>
        <!--<li><a href="/mypage/">Mypage</a></li>--> <!--'/mypage?name='+ encodeURIuigig(taro)'-->
       <li><a href="/search">Search</a></li> 
       </ul>
    </nav>
    </div>
    </header>
    
    <div id="main-area">
        <div id="message-here"></div>
        <div id="seach-result"></div>
        </div>
  
  <!--  <form action="/room" method="POST">
  <input name="room" type="text" required>
  <button type="submit">New Room</button>
</form> -->

<form id="send-new-thread"></form>

 

    
     <script src="jquery.js"></script>
     <script>
    //const whatsyourname=document.getElementById("usernamepunk2")
    // const name10=whatsyourname.innerText
    // console.log(name10+" this the user name10 on ejs")
     //const realname=thisusername

     

  ã€€ã€€/*let ajaxObj=*/$.ajax({
        url: "http://localhost:5000"+ "/get_messages",
        method: "GET",
        success: function(response){
         //  flou=response
          
        // alert("success1:"+response)//ã“ã“ã‚‚å…·ä½“çš„ãªå€¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹ãŒä¸‹ã®å ´åˆã¯[object object]ã¨ãªã‚‹fuck
         //ã“ã“ã¯æˆåŠŸã™ã‚“ã®ã«ä¸‹ã®å ´åˆã¯æˆåŠŸã›ã‚“
          var messages2= document.getElementById('message-here')

          data=JSON.parse(response);
        //  alert("success1 parse:"+data)   
          
        for(var a=0; a< data.length; a++){//ã‚‚ã—è‡ªåˆ†ã¨åŒã˜åå‰ã ã£ãŸã‚‰èƒŒæ™¯ã‹ãˆã‚‹
            var li=document.createElement('div')
            var ident=data[a].id
            li.classList.add("chatboxx")
            li.setAttribute("id","boxx-"+ident)
            //åå‰
            const sendername=document.createElement('p')
            sendername.classList.add("nameofSender") 
            




            
              sendername.innerText=data[a].name
            
           // li.innerHTML=data[a].name+":"+data[a].messageContent2
          
            
            //ã„ã„ã­ã€€ãŠã‚ˆã³è¿”ä¿¡ãƒœã‚¿ãƒ³
            const buttonline=document.createElement('div')

            const goodbutton=document.createElement('button')
            goodbutton.setAttribute("id","good-"+data[a].id)
            goodbutton.classList.add("cestpasmafaute")
           
              goodbutton.textContent="â™¡:"+data[a].good//ğŸ‘ not yet
              console.log(data[a].goodname+"nulllll2")
            
            /*+ databaseã‹ã‚‰ã„ã„ã­å€¤ã®æ•°ã‚‚èª­ã¿å–ã‚Šã“ã“ã«ä¹—ã£ã‘ã‚‹ãã—ã¦ã€databaseã«ã¯
            threadã«ã„ã„ã­ã—ãŸusernameã‚‚ä¹—ã£ã¦ãŠã‚Šãã‚Œã«ã‚ˆã‚Šã€ã™ã§ã«æŠ¼ã•ã‚ŒãŸã‹å¦ã‹åˆ¤åˆ¥ã—ã€è¡¨ç¤ºã‚’å¤‰ãˆã‚‹
            æœ¬æ¥ã¯å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚½ã‚³ãƒ³å†…ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ãŒdont know well about how to do that   */
            

            goodbutton.onclick=function goodsend(){
              alert("Sadly, you have to login to push the good button")
             //idã§ã©ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã«ã„ã„ã­ã•ã‚ŒãŸã‹ç‰¹å®šã—ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
                  //è¡¨ç¤ºã‚’ã¾ã æŠ¼ã—ã¦ãªã„ã¨ãã¸
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//if not yetã€€ã€€ã€€ã€€
                
                  //è¡¨ç¤ºã‚’ã™ã§ã«æŠ¼ã—ãŸã¸
            }
            buttonline.append(goodbutton)
           //æ—¥å›³å®¶
            const thetime=document.createElement('p')
            thetime.classList.add("thetime")
            thetime.innerText=data[a].date
            //å†…å®¹
            const thecontent=document.createElement('div')
            thecontent.classList.add("thecontent")
            thecontent.setAttribute("id","cont-"+ident)
            thecontent.innerText=data[a].messageContent2
            //htmlã«ã¯ã“ã®é †ç•ªã§ä¹—ã‚‹
           li.append(sendername) 
            li.append(thecontent)

             li.append(buttonline)
            li.append(thetime)
            
            messages2.append(li)
           
          } 

   




        }
      })      
    
     
     
     
     
     
     
       //const realname=thisusername!!!!!!!!!!!!!!!!!!!!!!!!!!!

    /*  $.ajax({
        url: "http://localhost:5000"+ "/get_messages",
        method: "GET",
        success: function(response){
          console.log(response);
          var messages2= document.getElementById('message-here')

          var data= JSON.parse(response);
          for(var a=0; a< data.length; a++){//ã‚‚ã—è‡ªåˆ†ã¨åŒã˜åå‰ã ã£ãŸã‚‰èƒŒæ™¯ã‹ãˆã‚‹
            var li=document.createElement('div')
            li.classList.add("chatboxx")
            //åå‰
            const sendername=document.createElement('p')
            sendername.classList.add("nameofSender") 
            

            
              sendername.innerText=data[a].name
            
           // li.innerHTML=data[a].name+":"+data[a].messageContent2
          
            
           //æ—¥å›³å®¶
            const thetime=document.createElement('p')
            thetime.classList.add("thetime")
            thetime.innerText=data[a].date
            //å†…å®¹
            const thecontent=document.createElement('div')
            thecontent.classList.add("thecontent")
            thecontent.innerText=data[a].messageContent2
            //htmlã«ã¯ã“ã®é †ç•ªã§ä¹—ã‚‹
           li.append(sendername) 
            li.append(thecontent)
            li.append(thetime)
            
            messages2.append(li)
          }
        }
      }) */



  </script>
</body>



</html>